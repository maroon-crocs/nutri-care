import{a as d,j as e,d as k,e as z,T as E,f as H,A as R,Z as O,h as W}from"./vendor-ui-u3vF1HbP.js";import{g as I}from"./geminiService-CDbaLYac.js";import"./vendor-ai-CuKG3KbF.js";var h=(i=>(i.Underweight="Underweight",i.Normal="Normal",i.Overweight="Overweight",i.Obese="Obese",i))(h||{});const q=({onBMIChange:i})=>{const[u,M]=d.useState(65),[b,A]=d.useState(170),[n,C]=d.useState(null),[w,g]=d.useState(""),[m,N]=d.useState(!1),[p,y]=d.useState(!1),j=d.useRef(null);d.useEffect(()=>{var a,r;if(p&&j.current){const s=j.current,t=s.getContext("2d");if(!t)return;s.width=((a=s.parentElement)==null?void 0:a.offsetWidth)||300,s.height=((r=s.parentElement)==null?void 0:r.offsetHeight)||300;const c=[],o=["#22c55e","#eab308","#3b82f6","#f43f5e"];for(let x=0;x<100;x++)c.push({x:s.width/2,y:s.height/2,vx:(Math.random()-.5)*10,vy:(Math.random()-.5)*10,size:Math.random()*5+2,color:o[Math.floor(Math.random()*o.length)],life:100});const f=()=>{if(!t)return;t.clearRect(0,0,s.width,s.height);let x=!1;c.forEach(l=>{l.life>0&&(x=!0,l.x+=l.vx,l.y+=l.vy,l.vy+=.2,l.life--,t.fillStyle=l.color,t.beginPath(),t.arc(l.x,l.y,l.size,0,Math.PI*2),t.fill())}),x?requestAnimationFrame(f):y(!1)};f()}},[p]);const S=async()=>{const a=u,r=b/100;if(a<=0||r<=0)return;const s=a/(r*r);let t=h.Normal,c="text-green-600",o="Balance Master";s<18.5?(t=h.Underweight,c="text-blue-600",o="Growth Seeker"):s>=18.5&&s<24.9?(t=h.Normal,c="text-green-600",o="Balance Master",y(!0)):s>=25&&s<29.9?(t=h.Overweight,c="text-yellow-600",o="Action Taker"):(t=h.Obese,c="text-red-600",o="Transformation Hero");let f=100-Math.abs(s-22)*3;const x=Math.max(0,Math.min(100,Math.round(f))),l={bmi:s,status:t,color:c,score:x,badge:o};C(l),i&&i(l),N(!0),g("");try{const v=await I(s,t);g(v)}catch(v){console.error("Error fetching advice:",v),g(`Quest 1: Drink more water.
Quest 2: Eat whole foods.
Quest 3: Sleep well.`)}finally{N(!1)}};return e.jsx("section",{id:"bmi",className:"py-20 bg-leaf-50",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-16 items-start",children:[e.jsxs("div",{className:"lg:w-5/12",children:[e.jsx("h2",{className:"text-3xl font-serif font-bold text-slate-900 mb-6",children:"Level Up Your Health"}),e.jsx("p",{className:"text-slate-600 mb-8 text-lg",children:"Adjust the sliders to find your stats. Unlock your Health Score and get personalized daily quests from our AI!"}),e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Weight (kg)"}),e.jsxs("div",{className:"bg-slate-100 px-4 py-1 rounded-lg font-bold text-slate-900 text-lg",children:[u," kg"]})]}),e.jsx("input",{type:"range",min:"30",max:"200",value:u,onChange:a=>M(parseInt(a.target.value)),className:"w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-leaf-600 hover:accent-leaf-700 transition-all"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-2",children:[e.jsx("span",{children:"30kg"}),e.jsx("span",{children:"200kg"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 uppercase tracking-wide",children:"Height (cm)"}),e.jsxs("div",{className:"bg-slate-100 px-4 py-1 rounded-lg font-bold text-slate-900 text-lg",children:[b," cm"]})]}),e.jsx("input",{type:"range",min:"100",max:"250",value:b,onChange:a=>A(parseInt(a.target.value)),className:"w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-leaf-600 hover:accent-leaf-700 transition-all"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-2",children:[e.jsx("span",{children:"100cm"}),e.jsx("span",{children:"250cm"})]})]}),e.jsxs("button",{type:"button",onClick:S,disabled:m,className:"w-full bg-slate-900 hover:bg-slate-800 text-white py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-70 disabled:cursor-not-allowed",children:[m?e.jsx(k,{className:"animate-spin",size:24}):e.jsx(z,{size:24}),m?"Calculating...":"Calculate Score"]})]})]}),e.jsx("div",{className:"lg:w-7/12 w-full",children:n?e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-white rounded-3xl p-8 shadow-xl border border-leaf-100 relative overflow-hidden",children:[p&&e.jsx("canvas",{ref:j,className:"absolute inset-0 pointer-events-none z-10"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 relative z-0",children:[e.jsxs("div",{className:"relative w-48 h-24 mt-4",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden",children:e.jsx("div",{className:"w-48 h-48 bg-slate-100 rounded-full border-[20px] border-slate-100 box-border"})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex items-end justify-center",children:e.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full overflow-visible",children:[e.jsx("path",{d:"M 10 50 A 40 40 0 0 1 25 15",fill:"none",stroke:"#3b82f6",strokeWidth:"10"}),e.jsx("path",{d:"M 27 13 A 40 40 0 0 1 73 13",fill:"none",stroke:"#22c55e",strokeWidth:"10"}),e.jsx("path",{d:"M 75 15 A 40 40 0 0 1 90 50",fill:"none",stroke:"#eab308",strokeWidth:"10"}),e.jsxs("g",{style:{transformOrigin:"50px 50px",transform:`rotate(${Math.max(-90,Math.min(90,(n.bmi-25)*5))}deg)`,transition:"transform 1s cubic-bezier(0.4, 0, 0.2, 1)"},children:[e.jsx("path",{d:"M 50 50 L 50 10",stroke:"#1e293b",strokeWidth:"2"}),e.jsx("circle",{cx:"50",cy:"50",r:"3",fill:"#1e293b"})]})]})}),e.jsx("div",{className:"absolute -bottom-8 left-0 w-full text-center",children:e.jsx("span",{className:"text-sm font-bold text-slate-400",children:"BMI"})})]}),e.jsxs("div",{className:"text-center md:text-right flex-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-50 px-3 py-1 rounded-full mb-2",children:[e.jsx(E,{size:14,className:"text-yellow-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-600 uppercase",children:"Health Score"})]}),e.jsxs("div",{className:"flex items-baseline justify-center md:justify-end gap-1",children:[e.jsx("span",{className:"text-6xl font-black text-slate-900",children:n.score}),e.jsx("span",{className:"text-xl font-bold text-slate-400",children:"/100"})]}),e.jsx("div",{className:`text-lg font-bold ${n.color} mt-1`,children:n.status})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-6 text-white shadow-lg flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-full mb-3",children:e.jsx(H,{size:32})}),e.jsx("h4",{className:"text-sm font-medium opacity-90 uppercase tracking-wider mb-1",children:"Current Rank"}),e.jsx("h3",{className:"text-2xl font-bold",children:n.badge})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-md border border-slate-100 flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-leaf-100 p-2 rounded-lg text-leaf-600",children:e.jsx(R,{size:20})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-slate-500 font-bold uppercase",children:"BMI Value"}),e.jsx("span",{className:"text-2xl font-bold text-slate-800",children:n.bmi.toFixed(1)})]})]}),e.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-leaf-500 transition-all duration-1000",style:{width:`${Math.min(100,n.bmi/40*100)}%`}})})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-slate-900 rounded-3xl p-8 text-white relative overflow-hidden min-h-[200px]",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-leaf-500 rounded-full opacity-10 blur-3xl translate-x-1/3 -translate-y-1/3"}),e.jsxs("div",{className:"flex items-center gap-3 mb-6 relative z-10",children:[e.jsx(O,{className:"text-yellow-400",size:24}),e.jsx("h3",{className:"text-xl font-bold",children:"Daily Health Quests"})]}),m?e.jsxs("div",{className:"flex flex-col items-center justify-center py-4 relative z-10 text-slate-400",children:[e.jsx(k,{className:"animate-spin mb-2",size:32}),e.jsx("span",{children:"Analyzing health data..."})]}):e.jsx("div",{className:"prose prose-invert prose-p:my-2 prose-strong:text-leaf-300 relative z-10",children:w?w.split(`
`).map((a,r)=>a.trim()&&e.jsxs("div",{className:"flex items-start gap-3 bg-white/10 p-3 rounded-xl mb-2 last:mb-0 border border-white/5 animate-in slide-in-from-right-2",style:{animationDelay:`${r*100}ms`},children:[e.jsx(W,{size:18,className:"mt-1 shrink-0 text-leaf-400"}),e.jsx("span",{className:"text-sm md:text-base",children:a.replace(/[*#-]/g,"")})]},r)):e.jsx("div",{className:"text-slate-400 italic",children:"Complete the calculation to get your quests!"})})]})]}):e.jsxs("div",{className:"bg-white/50 border-2 border-dashed border-slate-200 rounded-3xl p-10 flex flex-col items-center justify-center text-center h-full min-h-[300px]",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm mb-6 animate-bounce",children:e.jsx(z,{size:48,className:"text-leaf-500"})}),e.jsx("h3",{className:"text-slate-900 font-bold text-xl mb-2",children:"Ready to Play?"}),e.jsx("p",{className:"text-slate-500 max-w-xs mb-6",children:"Enter your stats to reveal your health score, unlock badges, and get daily quests!"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})]})]})})]})})})};export{q as default};
